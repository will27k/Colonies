<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Colonies Ascendant</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="startupScreen">
        <h2>Game Setup</h2>
        <label for="numPlayersInput">Number of Human Players (1-4):</label>
        <input type="number" id="numPlayersInput" value="1" min="1" max="4">
        <button id="initializeGameButton">Start Game</button>
        <section id="gameInfoSection">
            <h2>About Pixel Colonies Ascendant</h2>
            <div class="info-content">
                <p><strong>Welcome, Overseer!</strong> Your goal is to guide your colored colony to dominance by gathering resources, upgrading your capabilities, and strategically outmaneuvering or overpowering other colonies.</p>
                
                <h3>The Pixels:</h3>
                <ul>
                    <li><strong>Colony Pixels (Red, Green, Purple, Blue):</strong> These are the units of your colony. They move automatically.</li>
                    <li><strong>Yellow Pixels (Gold):</strong> Collect these to spend on powerful upgrades for your colony during the upgrade phase (between rounds).</li>
                    <li><strong>White Pixels (Food):</strong> When a colony pixel moves onto a food pixel, it's consumed, and your colony spawns additional pixels (more with the 'Food Boost' upgrade).</li>
                </ul>

                <h3>Pixel Behavior & Priorities:</h3>
                <p>Your colony's pixels generally move randomly. However, they will attempt a <strong>directed move</strong> towards a specific target every 10 random moves (this frequency can be increased with the 'Focus Boost' upgrade).</p>
                <p>You (or the AI) can set a <strong>Priority</strong> for your colony:</p>
                <ul>
                    <li><strong>Food Priority:</strong> Directed moves will target the nearest Food pixel. Default starting priority.</li>
                    <li><strong>Gold Priority:</strong> Directed moves will target the nearest Gold pixel.</li>
                    <li><strong>Pixel Priority:</strong> Directed moves will target the nearest enemy colony's pixel.</li>
                </ul>

                <h3>Combat:</h3>
                <p>When a pixel moves onto a square occupied by an enemy pixel, they fight!</p>
                <ul>
                    <li>Each colony has a <strong>Strength Level</strong> (upgradable via 'Strength Boost'). A pixel's strength is 1 + its colony's Strength Level.</li>
                    <li>If an attacker's strength is higher, the defender is destroyed.</li>
                    <li>If a defender's strength is higher, the attacker is destroyed.</li>
                    <li>If strengths are equal, it's a 50/50 chance who survives.</li>
                </ul>

                <h3>Upgrades (End of Round):</h3>
                <p>After each 1-minute round, the game pauses for an upgrade phase. Spend your collected Gold on:</p>
                <ul>
                    <li><strong>Food Boost:</strong> Spawn more pixels when food is eaten.</li>
                    <li><strong>Pixel Boost:</strong> Start the next round with more pixels.</li>
                    <li><strong>Focus Boost:</strong> Pixels make directed moves more frequently.</li>
                    <li><strong>Strength Boost:</strong> Increases your pixels' combat strength.</li>
                </ul>
                <p><em>AI colonies will automatically purchase upgrades and set priorities.</em></p>
            </div>
        </section>
    </div>

    <div id="gameContent" style="display: none;">
        <header>
            <h1>Pixel Colonies Ascendant</h1>
        </header>
        <main id="gameArea">
            <div id="colony-0-info" class="colony-info-panel top-left-panel">
                <div class="colony-stats"></div>
                <div class="colony-upgrades" style="display: none;"></div>
            </div>

            <div id="canvasContainer">
                <canvas id="gameCanvas" width="200" height="200"></canvas>
            </div>

            <div id="gameTimerContainer" class="game-timer-panel">
                <p id="gameTimerDisplay">Time: 01:00</p>
            </div>

            <div id="colony-1-info" class="colony-info-panel top-right-panel">
                <div class="colony-stats"></div>
                <div class="colony-upgrades" style="display: none;"></div>
            </div>

            <div id="colony-2-info" class="colony-info-panel bottom-left-panel">
                <div class="colony-upgrades" style="display: none;"></div>
            </div>

            <div id="colony-3-info" class="colony-info-panel bottom-right-panel">
                <div class="colony-stats"></div>
                <div class="colony-upgrades" style="display: none;"></div>
            </div>
            
            <div id="gameInfoButtonContainer">
                <button id="openAboutModalButton">View Game Info</button>
            </div>
        </main>

        <footer>
            <p>Game In Development</p>
        </footer>
    </div>

    <!-- Upgrade Modal -->
    <div id="upgradeModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-button" id="closeUpgradeModal">&times;</button>
            <h3 id="modalColonyName">Colony Upgrades</h3>
            <p>Current Gold: <span id="modalColonyGold">0</span></p>
            <div id="modalUpgradeButtonsContainer">
                <!-- Upgrade buttons will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-button" id="closeAboutModal">&times;</button>
            <h3>About Pixel Colonies Ascendant</h3>
            <div id="aboutModalContent" class="modal-scrollable-content">
                <!-- Game info will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- Priority Selection Modal -->
    <div id="priorityModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-button" id="closePriorityModal">&times;</button>
            <h3 id="priorityModalTitle">Set Pixel Focus for [Colony Name]</h3>
            <div id="priorityModalButtonsContainer">
                <!-- Priority choice buttons (Food, Gold, Pixel) will be dynamically inserted here by JS -->
            </div>
        </div>
    </div>

    <!-- Win Modal -->
    <div id="winModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <!-- No close button for win modal, only Play Again -->
            <h2 id="winMessage">[Winner Info Here]</h2>
            <p>The battlefield is quiet. A new era begins?</p>
            <button id="playAgainButton" class="primary-action-button">Play Again</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 